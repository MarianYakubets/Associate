var LevelManager = {
	levels: [],
	zeroLevel: '{"number":0,"w":7,"h":8,"tiles":[{"x":0,"y":0,"color":"grey","mutable":true},{"x":1,"y":0,"color":"grey","mutable":true},{"x":2,"y":0,"color":"grey","mutable":true},{"x":0,"y":1,"color":"grey","mutable":true},{"x":1,"y":1,"color":"grey","mutable":true},{"x":2,"y":1,"color":"grey","mutable":true},{"x":0,"y":2,"color":"grey","mutable":true},{"x":1,"y":2,"color":"grey","mutable":true},{"x":2,"y":2,"color":"grey","mutable":true},{"x":0,"y":3,"color":"grey","mutable":true},{"x":1,"y":3,"color":"grey","mutable":true},{"x":2,"y":3,"color":"grey","mutable":true},{"x":3,"y":0,"color":"grey","mutable":true},{"x":3,"y":1,"color":"grey","mutable":true},{"x":3,"y":2,"color":"grey","mutable":true},{"x":3,"y":3,"color":"grey","mutable":true},{"x":4,"y":0,"color":"grey","mutable":true},{"x":4,"y":1,"color":"grey","mutable":true},{"x":4,"y":2,"color":"grey","mutable":true},{"x":4,"y":3,"color":"grey","mutable":true},{"x":5,"y":0,"color":"grey","mutable":true},{"x":5,"y":1,"color":"grey","mutable":true},{"x":5,"y":2,"color":"grey","mutable":true},{"x":5,"y":3,"color":"grey","mutable":true},{"x":6,"y":0,"color":"grey","mutable":true},{"x":6,"y":1,"color":"grey","mutable":true},{"x":6,"y":2,"color":"grey","mutable":true},{"x":6,"y":3,"color":"grey","mutable":true},{"x":0,"y":4,"color":"grey","mutable":true},{"x":1,"y":4,"color":"grey","mutable":true},{"x":2,"y":4,"color":"grey","mutable":true},{"x":3,"y":4,"color":"grey","mutable":true},{"x":4,"y":4,"color":"grey","mutable":true},{"x":5,"y":4,"color":"grey","mutable":true},{"x":6,"y":4,"color":"grey","mutable":true},{"x":0,"y":5,"color":"grey","mutable":true},{"x":1,"y":5,"color":"grey","mutable":true},{"x":2,"y":5,"color":"grey","mutable":true},{"x":3,"y":5,"color":"grey","mutable":true},{"x":4,"y":5,"color":"grey","mutable":true},{"x":5,"y":5,"color":"grey","mutable":true},{"x":6,"y":5,"color":"grey","mutable":true},{"x":0,"y":6,"color":"grey","mutable":true},{"x":1,"y":6,"color":"grey","mutable":true},{"x":2,"y":6,"color":"grey","mutable":true},{"x":3,"y":6,"color":"grey","mutable":true},{"x":4,"y":6,"color":"grey","mutable":true},{"x":5,"y":6,"color":"grey","mutable":true},{"x":6,"y":6,"color":"grey","mutable":true},{"x":0,"y":7,"color":"grey","mutable":true},{"x":1,"y":7,"color":"grey","mutable":true},{"x":2,"y":7,"color":"grey","mutable":true},{"x":3,"y":7,"color":"grey","mutable":true},{"x":4,"y":7,"color":"grey","mutable":true},{"x":5,"y":7,"color":"grey","mutable":true},{"x":6,"y":7,"color":"grey","mutable":true}],"legend":[{"x":0,"y":0,"color":"grey"},{"x":1,"y":0,"color":"grey","mutable":true},{"x":2,"y":0,"color":"grey","mutable":true},{"x":0,"y":1,"color":"grey","mutable":true},{"x":1,"y":1,"color":"grey","mutable":true},{"x":2,"y":1,"color":"grey","mutable":true},{"x":0,"y":2,"color":"grey","mutable":true},{"x":1,"y":2,"color":"grey","mutable":true},{"x":2,"y":2,"color":"grey","mutable":true},{"x":0,"y":3,"color":"grey","mutable":true},{"x":1,"y":3,"color":"grey","mutable":true},{"x":2,"y":3,"color":"grey","mutable":true},{"x":3,"y":0,"color":"grey","mutable":true},{"x":3,"y":1,"color":"grey","mutable":true},{"x":3,"y":2,"color":"grey","mutable":true},{"x":3,"y":3,"color":"grey","mutable":true},{"x":4,"y":0,"color":"grey","mutable":true},{"x":4,"y":1,"color":"grey","mutable":true},{"x":4,"y":2,"color":"grey","mutable":true},{"x":4,"y":3,"color":"grey","mutable":true},{"x":5,"y":0,"color":"grey","mutable":true},{"x":5,"y":1,"color":"grey","mutable":true},{"x":5,"y":2,"color":"grey","mutable":true},{"x":5,"y":3,"color":"grey","mutable":true},{"x":6,"y":0,"color":"grey","mutable":true},{"x":6,"y":1,"color":"grey","mutable":true},{"x":6,"y":2,"color":"grey","mutable":true},{"x":6,"y":3,"color":"grey","mutable":true},{"x":0,"y":4,"color":"grey","mutable":true},{"x":1,"y":4,"color":"grey","mutable":true},{"x":2,"y":4,"color":"grey","mutable":true},{"x":3,"y":4,"color":"grey","mutable":true},{"x":4,"y":4,"color":"grey","mutable":true},{"x":5,"y":4,"color":"grey","mutable":true},{"x":6,"y":4,"color":"grey","mutable":true},{"x":0,"y":5,"color":"grey","mutable":true},{"x":1,"y":5,"color":"grey","mutable":true},{"x":2,"y":5,"color":"grey","mutable":true},{"x":3,"y":5,"color":"grey","mutable":true},{"x":4,"y":5,"color":"grey","mutable":true},{"x":5,"y":5,"color":"grey","mutable":true},{"x":6,"y":5,"color":"grey","mutable":true},{"x":0,"y":6,"color":"grey","mutable":true},{"x":1,"y":6,"color":"grey","mutable":true},{"x":2,"y":6,"color":"grey","mutable":true},{"x":3,"y":6,"color":"grey","mutable":true},{"x":4,"y":6,"color":"grey","mutable":true},{"x":5,"y":6,"color":"grey","mutable":true},{"x":6,"y":6,"color":"grey","mutable":true},{"x":0,"y":7,"color":"grey","mutable":true},{"x":1,"y":7,"color":"grey","mutable":true},{"x":2,"y":7,"color":"grey","mutable":true},{"x":3,"y":7,"color":"grey","mutable":true},{"x":4,"y":7,"color":"grey","mutable":true},{"x":5,"y":7,"color":"grey","mutable":true},{"x":6,"y":7,"color":"grey","mutable":true}]}',

	syncLevels: function() {
		LevelManager.levels.splice(0, 0, JSON.parse(this.zeroLevel));
		firebase.database().ref('levels').once('value').then(function(snapshot) {
			snapshot.val().forEach(function(item) {
				var level = JSON.parse(item);
				LevelManager.levels[level.number] = level;
			}, this);
		});
	},

	getLevel: function(number) {
		console.log("level number " + number);
		var level;
		if (this.levels[number] == null) {
			level = this.levels[0];
		} else {
			level = this.levels[number];
		}
		level.number = number;
		return level;
	}
};